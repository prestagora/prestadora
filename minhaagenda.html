<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minha Agenda - PrestAgora</title>

<style>
body {
    margin: 0;
    background: #f4f6f9;
    font-family: Arial, sans-serif;
}

.sidebar {
    width: 250px;
    height: 100vh;
    background: #0d6efd;
    color: #fff;
    position: fixed;
    left: 0;
    top: 0;
    padding-top: 30px;
}

.sidebar h2 {
    text-align:center;
    margin-bottom:30px;
    font-size:20px;
}

.sidebar a {
    display:block;
    padding:15px 20px;
    color:#fff;
    text-decoration:none;
    font-size:16px;
}

.sidebar a:hover {
    background:#0b5ed7;
    cursor:pointer;
}

.main {
    margin-left: 250px;
    padding: 30px;
}

.topbar {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:25px;
}

.topbar h1 {
    margin:0;
    font-size:24px;
    color:#333;
}

.card {
    background:#fff;
    padding:25px;
    border-radius:10px;
    box-shadow:0 0 12px rgba(0,0,0,0.1);
    margin-bottom:25px;
}

.agenda-container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.dia-card {
    width: 300px;
    min-height: 450px;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
}

.dia-card h3 {
    margin: 0 0 15px 0;
    font-size: 20px;
    color: #0d6efd;
    font-weight: bold;
}

.tabela-agenda {
    width: 100%;
    border-collapse: collapse;
}

.tabela-agenda th,
.tabela-agenda td {
    border-bottom: 1px solid #ddd;
    padding: 6px;
}

.tabela-agenda input {
    width: 100%;
    padding: 6px;
    border: none;
    outline: none;
}

.salvar-btn {
    background:#0d6efd;
    width:100%;
    border:none;
    margin-top:15px;
    padding:10px;
    color:#fff;
    border-radius:6px;
    cursor:pointer;
}

.salvar-btn:hover {
    background:#0b5ed7;
}

/* EVENTOS - NOVO E MAIS PROFISSIONAL */
.eventos-card {
    width: 330px;
    min-height: 480px;
    background: #fff;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.12);
    border-left: 4px solid #0d6efd;
}

.eventos-card h3 {
    margin: 0 0 15px 0;
    font-size: 22px;
    color: #0d6efd;
    font-weight: bold;
}

.eventos-card label {
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.eventos-card input,
.eventos-card textarea {
    width: 100%;
    padding: 8px 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    outline: none;
    margin-top: 5px;
    margin-bottom: 12px;
    font-size: 14px;
}

.eventos-card textarea {
    height: 80px;
    resize: none;
}

.notificacao-btn {
    background:#198754;
    border:none;
    width:100%;
    padding:10px;
    border-radius:6px;
    color:#fff;
    cursor:pointer;
    margin-top:5px;
}

.notificacao-btn:hover {
    background:#157347;
}

.lista-eventos {
    margin-top:15px;
    padding: 10px;
    background: #f1f5ff;
    border-radius: 8px;
    max-height: 200px;
    overflow-y: auto;
    border-left: 3px solid #0d6efd;
}

.evento-item {
    padding: 8px;
    background: #fff;
    border-radius: 6px;
    box-shadow: 0 0 6px rgba(0,0,0,0.1);
    margin-bottom: 10px;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>PrestAgora Digital</h2>

    <a href="dashboard.html">Dashboard</a>

    <a href="#">Contas Meta Ads</a>

    <a href="meusclientes.html">Meus Clientes</a>
    <a href="minhaagenda.html" style="background:#0b5ed7;">Minha Agenda</a>
    <a href="bibliotecaanuncios.html">Biblioteca de anúncios</a>
    <a href="analisesite.html">Analise de sites</a>
    <a href="#">Analise de redes sociais</a>
    <a href="#" onclick="sair()">Sair</a>
</div>

<!-- MAIN -->
<div class="main">
    <div class="topbar">
        <h1>Minha Agenda</h1>
    </div>

    <div class="agenda-container">

        <!-- AGENDA DOS DIAS -->
        <script>
            const dias = [
                "Segunda-feira",
                "Terça-feira",
                "Quarta-feira",
                "Quinta-feira",
                "Sexta-feira",
                "Sábado",
                "Domingo"
            ];

            document.write(`
                ${dias.map((dia, index) => `
                    <div class='dia-card'>
                        <h3>${dia}</h3>
                        <table class='tabela-agenda'>
                            <thead>
                                <tr>
                                    <th style='width:70px;'>Horário</th>
                                    <th>Compromisso</th>
                                </tr>
                            </thead>
                            <tbody id='agenda_${index}'>
                                ${Array.from({ length: 12 }).map((_, i) => `
                                    <tr>
                                        <td><input type="text" placeholder="08:00"></td>
                                        <td><input type="text" placeholder="Novo compromisso..."></td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <button class="salvar-btn" onclick="salvarDia(${index})">Salvar</button>
                    </div>
                `).join('')}
            `);
        </script>

        <!-- EVENTOS - NOVO CARD -->
        <div class="eventos-card">
            <h3>Eventos</h3>

            <label>Data do evento</label>
            <input type="date" id="eventData">

            <label>Horário</label>
            <input type="time" id="eventHora">

            <label>Descrição</label>
            <textarea id="eventDesc" placeholder="Ex: Reunião importante com cliente..."></textarea>

            <button class="salvar-btn" onclick="salvarEvento()">Salvar Evento</button>
            <button class="notificacao-btn" onclick="ativarNotificacao()">Ativar Notificação do Sistema</button>

            <div class="lista-eventos" id="listaEventos"></div>
        </div>

    </div>
</div>

<script>
function salvarDia(index) {
    const linhas = [...document.querySelectorAll(`#agenda_${index} tr`)];
    
    const dados = linhas.map(linha => ({
        hora: linha.children[0].querySelector("input").value,
        texto: linha.children[1].querySelector("input").value
    }));

    localStorage.setItem("agenda_" + index, JSON.stringify(dados));
    alert("Agenda salva com sucesso!");
}

function salvarEvento() {
    const data = document.getElementById("eventData").value;
    const hora = document.getElementById("eventHora").value;
    const desc = document.getElementById("eventDesc").value;

    if (!data || !hora || !desc) {
        alert("Preencha todos os campos do evento!");
        return;
    }

    const evento = { data, hora, desc };
    const eventos = JSON.parse(localStorage.getItem("eventos") || "[]");

    eventos.push(evento);
    localStorage.setItem("eventos", JSON.stringify(eventos));

    carregarEventos();
    alert("Evento salvo!");
}

function carregarEventos() {
    const eventos = JSON.parse(localStorage.getItem("eventos") || "[]");
    const lista = document.getElementById("listaEventos");

    lista.innerHTML = eventos.map(e => `
        <div class="evento-item">
            <strong>${e.data}</strong> às <strong>${e.hora}</strong><br>
            ${e.desc}
        </div>
    `).join('');
}

function ativarNotificacao() {
    Notification.requestPermission().then(perm => {
        if (perm === "granted") {
            new Notification("Notificações ativadas com sucesso!");
        } else {
            alert("Você precisa permitir notificações no navegador.");
        }
    });
}

window.onload = () => {
    carregarEventos();

    for (let i = 0; i < 7; i++) {
        const dados = JSON.parse(localStorage.getItem("agenda_" + i) || "[]");
        const linhas = document.querySelectorAll(`#agenda_${i} tr`);

        dados.forEach((item, idx) => {
            if (linhas[idx]) {
                linhas[idx].children[0].querySelector("input").value = item.hora;
                linhas[idx].children[1].querySelector("input").value = item.texto;
            }
        });
    }
};
</script>

</body>
</html>
