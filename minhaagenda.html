<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minha Agenda - PrestAgora</title>

<style>
body {
    margin: 0;
    background: #f4f6f9;
    font-family: Arial, sans-serif;
}

/* SIDEBAR */
.sidebar {
    width: 250px;
    height: 100vh;
    background: #0d6efd;
    color: #fff;
    position: fixed;
    left: 0;
    top: 0;
    padding-top: 30px;
}

.sidebar h2 {
    text-align:center;
    margin-bottom:30px;
}

.sidebar a {
    display:block;
    padding:15px 20px;
    color:#fff;
    text-decoration:none;
    font-size:16px;
}

.sidebar a:hover {
    background:#0b5ed7;
    cursor:pointer;
}

/* MAIN */
.main {
    margin-left: 250px;
    padding: 30px;
}

.topbar h1 {
    margin:0 0 25px 0;
    font-size:26px;
    color:#333;
}

/* EVENTOS */
.eventos-full {
    width: 100%;
    background:#fff;
    padding:25px;
    margin-bottom:25px;
    border-radius:12px;
    box-shadow:0 0 12px rgba(0,0,0,0.1);
    border-left:4px solid #0d6efd;
}

.eventos-full h2 {
    margin-top:0;
    font-size:22px;
    color:#0d6efd;
    font-weight:bold;
}

.eventos-full label {
    font-weight:bold;
}

.eventos-full input,
.eventos-full textarea {
    width:100%;
    padding:10px;
    border:1px solid #ccc;
    border-radius:6px;
    margin-top:5px;
}

.eventos-flex {
    display:flex;
    gap:20px;
    margin-bottom:20px;
}

.eventos-flex div {
    flex:1;
}

.salvar-evento-btn {
    background:#0d6efd;
    border:none;
    padding:12px;
    color:#fff;
    border-radius:6px;
    cursor:pointer;
    width:200px;
    font-weight:bold;
}

.lista-eventos {
    margin-top:15px;
    padding: 10px;
    background: #f1f5ff;
    border-radius: 8px;
}

/* AGENDA NOVO LAYOUT */
.agenda-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 20px;
}

.dia-coluna {
    background:#fff;
    padding:15px;
    border-radius:10px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
}

.dia-coluna h3 {
    text-align:center;
    margin-top:0;
    color:#0d6efd;
    font-weight:bold;
}

.linha {
    display:flex;
    margin-bottom:10px;
    gap:5px;
}

.linha input {
    flex:1;
    padding:8px;
    border:1px solid #ccc;
    border-radius:6px;
}

.add-btn {
    width:100%;
    padding:8px;
    border:none;
    background:#198754;
    color:#fff;
    border-radius:6px;
    cursor:pointer;
    margin-top:5px;
}

.add-btn:hover {
    background:#157347;
}

.salvar-btn {
    width:100%;
    padding:8px;
    border:none;
    background:#0d6efd;
    color:#fff;
    border-radius:6px;
    cursor:pointer;
    margin-top:15px;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>PrestAgora Digital</h2>
    <a href="dashboard.html">Dashboard</a>
    <a href="#">Contas Meta Ads</a>
    <a href="meusclientes.html">Meus Clientes</a>
    <a href="minhaagenda.html" style="background:#0b5ed7;">Minha Agenda</a>
    <a href="bibliotecaanuncios.html">Biblioteca de anúncios</a>
    <a href="analisesite.html">Análise de sites</a>
    <a href="#" onclick="sair()">Sair</a>
</div>

<!-- MAIN -->
<div class="main">

    <div class="topbar"><h1>Minha Agenda</h1></div>

    <!-- EVENTOS EM FULL WIDTH -->
    <div class="eventos-full">
        <h2>Eventos</h2>

        <div class="eventos-flex">
            <div>
                <label>Data</label>
                <input type="date" id="eventData">
            </div>
            <div>
                <label>Hora</label>
                <input type="time" id="eventHora">
            </div>
            <div>
                <label>Descrição</label>
                <input type="text" id="eventDesc" placeholder="Ex: Reunião de alinhamento...">
            </div>
        </div>

        <button class="salvar-evento-btn" onclick="salvarEvento()">Salvar Evento</button>

        <div class="lista-eventos" id="listaEventos"></div>
    </div>

    <!-- NOVA AGENDA EM HORIZONTAL -->
    <div class="agenda-grid" id="agendaGrid"></div>
</div>

<script>
const diasSemana = [
    "Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"
];

/* CRIA COLUNAS HORIZONTAIS */
function montarAgenda() {
    let html = "";

    diasSemana.forEach((dia, index) => {
        html += `
        <div class="dia-coluna" id="dia_${index}">
            <h3>${dia}</h3>

            <div id="linhas_${index}">
                ${criarLinha(index)}
                ${criarLinha(index)}
                ${criarLinha(index)}
            </div>

            <button class="add-btn" onclick="adicionarLinha(${index})">+ Adicionar</button>

            <button class="salvar-btn" onclick="salvarDia(${index})">Salvar</button>
        </div>`;
    });

    document.getElementById("agendaGrid").innerHTML = html;

    carregarAgenda();
}

function criarLinha(index) {
    return `
        <div class="linha">
            <input type="text" placeholder="08:00">
            <input type="text" placeholder="Compromisso...">
        </div>
    `;
}

function adicionarLinha(index) {
    document.getElementById("linhas_" + index).innerHTML += criarLinha(index);
}

function salvarDia(index) {
    const linhas = [...document.querySelectorAll(`#linhas_${index} .linha`)];
    const dados = linhas.map(l => ({
        hora: l.children[0].value,
        desc: l.children[1].value
    }));

    localStorage.setItem("agendaDia_" + index, JSON.stringify(dados));
    alert("Agenda salva!");
}

function carregarAgenda() {
    for (let i = 0; i < 7; i++) {
        const salvo = JSON.parse(localStorage.getItem("agendaDia_" + i) || "[]");
        const container = document.getElementById("linhas_" + i);

        if (salvo.length > 0) {
            container.innerHTML = "";
            salvo.forEach(item => {
                container.innerHTML += `
                <div class="linha">
                    <input value="${item.hora}">
                    <input value="${item.desc}">
                </div>`;
            });
        }
    }
}

function salvarEvento() {
    const data = eventData.value;
    const hora = eventHora.value;
    const desc = eventDesc.value;

    if (!data || !hora || !desc) return alert("Preencha tudo!");

    const evento = { data, hora, desc };
    const lista = JSON.parse(localStorage.getItem("eventos") || "[]");

    lista.push(evento);
    localStorage.setItem("eventos", JSON.stringify(lista));

    carregarEventos();
}

function carregarEventos() {
    const lista = JSON.parse(localStorage.getItem("eventos") || "[]");
    listaEventos.innerHTML = lista.map(e => `
        <div><strong>${e.data}</strong> ${e.hora} — ${e.desc}</div>
    `).join('');
}

montarAgenda();
carregarEventos();
</script>
</body>
</html>
