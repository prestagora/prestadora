<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minha Agenda - PrestAgora</title>

<style>
body {
    margin: 0;
    background: #f4f6f9;
    font-family: Arial, sans-serif;
}

.sidebar {
    width: 250px;
    height: 100vh;
    background: #0d6efd;
    color: #fff;
    position: fixed;
    left: 0;
    top: 0;
    padding-top: 30px;
}

.sidebar h2 {
    text-align:center;
    margin-bottom:30px;
    font-size:20px;
}

.sidebar a {
    display:block;
    padding:15px 20px;
    color:#fff;
    text-decoration:none;
    font-size:16px;
}

.sidebar a:hover {
    background:#0b5ed7;
    cursor:pointer;
}

.main {
    margin-left: 250px;
    padding: 30px;
}

.topbar {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:25px;
}

.topbar h1 {
    margin:0;
    font-size:24px;
    color:#333;
}

.card {
    background:#fff;
    padding:25px;
    border-radius:10px;
    box-shadow:0 0 12px rgba(0,0,0,0.1);
    margin-bottom:25px;
}

.agenda-container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.dia-card {
    width: 300px;
    min-height: 450px;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
}

.dia-card h3 {
    margin: 0 0 15px 0;
    font-size: 20px;
    color: #0d6efd;
    font-weight: bold;
}

.tabela-agenda {
    width: 100%;
    border-collapse: collapse;
}

.tabela-agenda th,
.tabela-agenda td {
    border-bottom: 1px solid #ddd;
    padding: 6px;
}

.tabela-agenda input {
    width: 100%;
    padding: 6px;
    border: none;
    outline: none;
}

.salvar-btn {
    background:#0d6efd;
    width:100%;
    border:none;
    margin-top:15px;
    padding:10px;
    color:#fff;
    border-radius:6px;
    cursor:pointer;
}

.salvar-btn:hover {
    background:#0b5ed7;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>PrestAgora Digital</h2>

    <a href="dashboard.html">Dashboard</a>

    <!-- Contas Meta Ads -->
    <a href="#contas" onclick="toggleContas()">Contas Meta Ads <span id="setaConta">▼</span></a>
    <div class="contas-lista" id="listaContas"></div>

    <a href="meusclientes.html">Meus Clientes</a>
    <a href="minhaagenda.html" style="background:#0b5ed7;">Minha Agenda</a>
    <a href="bibliotecaanuncios.html">Biblioteca de anúncios</a>
    <a href="analisesite.html">Analise de sites</a>
    <a href="#">Analise de redes sociais</a>
    <a href="#" onclick="sair()">Sair</a>
</div>

<!-- MAIN -->
<div class="main">
    <div class="topbar">
        <h1>Minha Agenda</h1>
    </div>

    <div class="agenda-container">

        <!-- Gerador automático das 7 colunas -->
        <script>
            const dias = [
                "Segunda-feira",
                "Terça-feira",
                "Quarta-feira",
                "Quinta-feira",
                "Sexta-feira",
                "Sábado",
                "Domingo"
            ];

            document.write(`
                ${dias.map((dia, index) => `
                    <div class='dia-card'>
                        <h3>${dia}</h3>
                        <table class='tabela-agenda'>
                            <thead>
                                <tr>
                                    <th style='width:70px;'>Horário</th>
                                    <th>Compromisso</th>
                                </tr>
                            </thead>
                            <tbody id='agenda_${index}'>
                                ${Array.from({ length: 12 }).map((_, i) => `
                                    <tr>
                                        <td><input type="text" placeholder="08:00"></td>
                                        <td><input type="text" placeholder="Novo compromisso..."></td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <button class="salvar-btn" onclick="salvarDia(${index})">Salvar</button>
                    </div>
                `).join('')}
            `);
        </script>

    </div>
</div>

<script>
function salvarDia(index) {
    const linhas = [...document.querySelectorAll(`#agenda_${index} tr`)];
    
    const dados = linhas.map(linha => ({
        hora: linha.children[0].querySelector("input").value,
        texto: linha.children[1].querySelector("input").value
    }));

    localStorage.setItem("agenda_" + index, JSON.stringify(dados));

    alert("Agenda salva com sucesso!");
}

window.onload = () => {
    for (let i = 0; i < 7; i++) {
        const dados = JSON.parse(localStorage.getItem("agenda_" + i) || "[]");
        const linhas = document.querySelectorAll(`#agenda_${i} tr`);

        dados.forEach((item, idx) => {
            if (linhas[idx]) {
                linhas[idx].children[0].querySelector("input").value = item.hora;
                linhas[idx].children[1].querySelector("input").value = item.texto;
            }
        });
    }
};
</script>

</body>
</html>
